{
    "ast": "TranslationUnit",
    "filename": "/Users/mp/alicenode_inhabitat/hmesh.vert.glsl",
    "nodes": [
        {
            "ast": "VarDecl",
            "loc": {
                "begin": {
                    "char": 19,
                    "col": 1,
                    "line": 3
                },
                "end": {
                    "char": 31,
                    "col": 13,
                    "line": 3
                }
            },
            "name": "mat4",
            "type": "int"
        },
        {
            "ast": "VarDecl",
            "loc": {
                "begin": {
                    "char": 131,
                    "col": 1,
                    "line": 4
                },
                "end": {
                    "char": 148,
                    "col": 18,
                    "line": 4
                }
            },
            "name": "sampler2D",
            "type": "int"
        },
        {
            "ast": "VarDecl",
            "loc": {
                "begin": {
                    "char": 277,
                    "col": 1,
                    "line": 10
                },
                "end": {
                    "char": 285,
                    "col": 9,
                    "line": 10
                }
            },
            "name": "vec2",
            "type": "int"
        },
        {
            "ast": "VarDecl",
            "loc": {
                "begin": {
                    "char": 296,
                    "col": 1,
                    "line": 11
                },
                "end": {
                    "char": 304,
                    "col": 9,
                    "line": 11
                }
            },
            "name": "vec3",
            "type": "int"
        },
        {
            "ast": "FunctionDecl",
            "loc": {
                "begin": {
                    "char": 345,
                    "col": 1,
                    "line": 14
                },
                "end": {
                    "char": 971,
                    "col": 2,
                    "line": 34
                }
            },
            "mangled_name": "_main",
            "name": "main",
            "nodes": [
                {
                    "ast": "CompoundStmt",
                    "loc": {
                        "begin": {
                            "char": 357,
                            "col": 13,
                            "line": 14
                        },
                        "end": {
                            "char": 971,
                            "col": 2,
                            "line": 34
                        }
                    },
                    "text": "{\n\ttexCoord = aTexCoord;\n\tnormal = aNormal;\n\n\t// basic grid mesh is 0..1, need to scale that to the world\n\tposition = (uLandMatrixInverse * vec4(aPos, 1.)).xyz;\n\n\t// get the landscape data (normal + height) from the texture:\n\tvec4 land = texture(uLandTex, texCoord.xy);\n\n\t// height (land.w) needs to be scaled to the world\n\tvec3 deform = (uLandMatrixInverse * vec4(0., land.w, 0., 1.)).xyz;\n\tposition += deform;\n\tnormal = land.xyz;\n\n\t// steepness depends on normal:\n\t//steepness = abs(1. - dot(normal, vec3(0, 1, 0)));\n\tsteepness = abs(1. - normal.y);\n\t\n\tgl_Position = uViewProjectionMatrix * vec4(position, 1.);\n}"
                }
            ],
            "type": "void ()",
            "type_args": [],
            "type_ret": "void"
        }
    ]
}
